<?xml version="1.0" encoding="UTF-8"?>
<DataTemplate xmlns="http://xamarin.com/schemas/2014/forms"
              xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
              xmlns:d="http://xamarin.com/schemas/2014/forms/design"
              xmlns:resources="clr-namespace:LiveScore.Soccer.ViewResources"
              xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
              xmlns:tabStrip="clr-namespace:LiveScore.Core.Controls.TabStrip;assembly=LiveScore.Core"
              xmlns:ffImageLoading="clr-namespace:FFImageLoading.Svg.Forms;assembly=FFImageLoading.Svg.Forms"
              mc:Ignorable="d"
              x:Class="LiveScore.Soccer.Views.Templates.MatchDetails.TrackerCommentary.TrackerCommentaryTemplate">
    <FlexLayout Direction="Column">
        <FlexLayout.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <resources:MatchDetailViewResource />
                    <resources:MatchDetailTrackerViewResource />
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </FlexLayout.Resources>
        <ActivityIndicator Margin="20"
                           IsRunning="{Binding IsBusy}"
                           IsVisible="{Binding IsBusy}"
                           Style="{StaticResource CenterActivityIndicator}"
                           VerticalOptions="StartAndExpand" />
        <RefreshView IsRefreshing="{Binding IsRefreshing}"
                     RefreshColor="White"
                     Command="{Binding RefreshCommand}">
            <tabStrip:TabItemCollectionView BackgroundColor="{StaticResource ListViewBgColor}"
                                            ItemsSource="{Binding MatchCommentaries}"
                                            IsVisible="{Binding IsNotBusy}">
                <tabStrip:TabItemCollectionView.Header>
                    <StackLayout>
                        <Label Style="{StaticResource NoInfo}"
                               IsVisible="{Binding NoData}"
                               Text="There is no data" />
                        <Grid IsVisible="{Binding HasTrackerData}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto" />
                            </Grid.RowDefinitions>
                            <FlexLayout Grid.Column="0"
                                        Grid.Row="0"
                                        IsVisible="{Binding TrackerVisible}">
                                <WebView Source="{Binding WidgetContent}"
                                         Style="{StaticResource MatchBallTrackerWebView}" />
                            </FlexLayout>
                            <Button  Grid.Column="0"
                                     Grid.Row="0"
                                     IsVisible="{Binding TrackerVisible}"
                                     Style="{StaticResource MatchBallTrackerCollapseIcon}"
                                     Command="{Binding OnCollapseTracker}" />
                        </Grid>
                        <FlexLayout Style="{StaticResource MatchBallTrackerGroup}"
                                    IsVisible="{Binding TrackerHidden}">
                            <Label Text="VIEW BALL TRACKER"
                                   Style="{StaticResource GroupName}" />
                            <Button Style="{StaticResource MatchBallTrackerExpandIcon}"
                                    Command="{Binding OnExpandTracker}" />
                            <FlexLayout.GestureRecognizers>
                                <TapGestureRecognizer  Command="{Binding OnExpandTracker}" />
                            </FlexLayout.GestureRecognizers>
                        </FlexLayout>
                        <BoxView Style="{StaticResource HorizontalLine}"
                                 IsVisible="{Binding TrackerHidden}" />
                        <FlexLayout Style="{StaticResource Group}"
                                    IsVisible="{Binding HasCommentariesData}">
                            <Label Style="{StaticResource GroupName}"
                                   Text="COMMENTARIES" />
                        </FlexLayout>
                    </StackLayout>
                </tabStrip:TabItemCollectionView.Header>
                <tabStrip:TabItemCollectionView.ItemTemplate>
                    <DataTemplate>
                        <StackLayout>
                            <BoxView Style="{StaticResource HorizontalLine}" />
                            <Grid Style="{StaticResource MatchTrackerCommentariesRow}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="{StaticResource CommentaryMinuteWidthSize}" />
                                    <ColumnDefinition Width="{StaticResource CommentaryIconWidthSize}" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto" />
                                </Grid.RowDefinitions>

                                <Label Grid.Row="0"
                                       Grid.Column="0"
                                       Style="{StaticResource MatchTrackerMinutes}"
                                       Text="{Binding MatchTime, Mode=OneTime}" />
                                <ffImageLoading:SvgCachedImage Grid.Row="0"
                                                               Grid.Column="1"
                                                               DownsampleToViewSize="True"
                                                               Source="{Binding ImageSource}"
                                                               Style="{StaticResource MatchTrackerCommentariesIcons}" />
                                <Label Grid.Row="0"
                                       Grid.Column="2"
                                       Style="{StaticResource MatchTrackerCommentariesText}"
                                       TextColor="{Binding CommentaryTextColor, Mode=OneTime}"
                                       Text="{Binding CommentaryText}" />
                            </Grid>
                        </StackLayout>
                    </DataTemplate>
                </tabStrip:TabItemCollectionView.ItemTemplate>
                <tabStrip:TabItemCollectionView.Footer>
                    <StackLayout BackgroundColor="Transparent"
                                 HeightRequest="300">
                        <!--Work arround for scrolling issue-->
                        <Label Text=" "></Label>
                        <Button Text="{Binding ShowLessMoreButtonText}"
                                IsVisible="{Binding VisibleShowMore}"
                                Style="{StaticResource MatchTrackerShowMoreButton}"
                                Command="{Binding ShowMoreCommentariesCommand}"
                                HorizontalOptions="CenterAndExpand" />
                    </StackLayout>
                </tabStrip:TabItemCollectionView.Footer>
            </tabStrip:TabItemCollectionView>
        </RefreshView>
    </FlexLayout>
</DataTemplate>