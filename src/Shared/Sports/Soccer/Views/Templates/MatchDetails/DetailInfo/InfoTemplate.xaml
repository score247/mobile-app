<?xml version="1.0" encoding="UTF-8" ?>
<DataTemplate
    x:Class="LiveScore.Soccer.Views.Templates.DetailInfo.InfoTemplate"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:commonConverters="clr-namespace:LiveScore.Common.Converters;assembly=LiveScore.Common"
    xmlns:d="http://xamarin.com/schemas/2014/forms/design"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:resources="clr-namespace:LiveScore.Soccer.ViewResources"
    xmlns:tabStrip="clr-namespace:LiveScore.Core.Controls.TabStrip;assembly=LiveScore.Core"
    xmlns:templateSelectors="clr-namespace:LiveScore.Soccer.Views.Templates.MatchDetailInfo"
    mc:Ignorable="d">
    <StackLayout>
        <StackLayout.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <resources:MatchDetailViewResource />
                    <resources:MatchDetailInfoViewResource />
                </ResourceDictionary.MergedDictionaries>
                <commonConverters:TextNotEmptyConverter x:Key="textNotEmptyConverter" />
                <templateSelectors:InfoItemTemplateSelector x:Key="infoItemTemplateSelector" />
            </ResourceDictionary>
        </StackLayout.Resources>

        <ActivityIndicator
            Margin="20"
            IsEnabled="{Binding IsLoading}"
            IsRunning="{Binding IsLoading}"
            IsVisible="{Binding IsLoading}"
            Style="{StaticResource CenterActivityIndicator}"
            VerticalOptions="StartAndExpand" />

        <tabStrip:TabITemListView
            AutomationId="MatchDetailInfo"
            AutomationProperties.IsInAccessibleTree="False"
            BackgroundColor="{StaticResource PrimaryColor}"
            HasUnevenRows="True"
            IsPullToRefreshEnabled="true"
            IsRefreshing="{Binding IsRefreshing}"
            IsVisible="{Binding IsNotLoading}"
            ItemTemplate="{StaticResource infoItemTemplateSelector}"
            ItemsSource="{Binding InfoItemViewModels}"
            RefreshCommand="{Binding RefreshCommand}"
            RowHeight="43"
            SeparatorColor="Transparent">
            <tabStrip:TabITemListView.Footer>
                <StackLayout
                    BackgroundColor="{StaticResource PrimaryColor}"
                    HeightRequest="500"
                    IsVisible="{Binding IsNotLoading}">
                    <FlexLayout Style="{StaticResource Group}">
                        <Label
                            AutomationId="MatchInfoHeaderTitle"
                            Style="{StaticResource GroupName}"
                            Text="MATCH INFO" />
                    </FlexLayout>
                    <BoxView Style="{StaticResource HorizontalLine}" />
                    <FlexLayout IsVisible="{Binding Match.Referee, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource MatchInfoDetailRow}">
                        <Label
                            AutomationId="RefereeTitle"
                            Style="{StaticResource MatchInfoTitle}"
                            Text="Referee:" />
                        <Label
                            AutomationId="RefereeName"
                            Style="{StaticResource MatchInfoValue}"
                            Text="{Binding Match.Referee}" />
                    </FlexLayout>
                    <BoxView IsVisible="{Binding Match.Referee, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource HorizontalLine}" />
                    <FlexLayout IsVisible="{Binding DisplayVenue, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource MatchInfoDetailRow}">
                        <Label
                            AutomationId="VenueTitle"
                            Style="{StaticResource MatchInfoTitle}"
                            Text="Venue:" />
                        <Label
                            AutomationId="VenueName"
                            Style="{StaticResource MatchInfoValue}"
                            Text="{Binding DisplayVenue}" />
                    </FlexLayout>
                    <BoxView IsVisible="{Binding DisplayVenue, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource HorizontalLine}" />
                    <FlexLayout IsVisible="{Binding DisplayAttendance, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource MatchInfoDetailRow}">
                        <Label
                            AutomationId="AttendanceTitle"
                            Style="{StaticResource MatchInfoTitle}"
                            Text="Spectators:" />
                        <Label
                            AutomationId="Attendance"
                            Style="{StaticResource MatchInfoValue}"
                            Text="{Binding DisplayAttendance}" />
                    </FlexLayout>
                    <BoxView IsVisible="{Binding DisplayAttendance, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource HorizontalLine}" />
                    <FlexLayout IsVisible="{Binding DisplayEventDate, Converter={StaticResource textNotEmptyConverter}}" Style="{StaticResource MatchInfoDetailRow}">
                        <Label
                            AutomationId="EventDateTitle"
                            Style="{StaticResource MatchInfoTitle}"
                            Text="Kick Off Time:" />
                        <Label
                            AutomationId="EventDate"
                            Style="{StaticResource MatchInfoValue}"
                            Text="{Binding DisplayEventDate}" />
                    </FlexLayout>
                </StackLayout>
            </tabStrip:TabITemListView.Footer>
        </tabStrip:TabITemListView>
    </StackLayout>
</DataTemplate>