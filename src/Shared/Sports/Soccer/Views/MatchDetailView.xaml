<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage
    x:Class="LiveScore.Soccer.Views.MatchDetailView"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:coreConverters="clr-namespace:LiveScore.Core.Converters;assembly=LiveScore.Core"
    xmlns:coreTemplates="clr-namespace:LiveScore.Core.Views.Templates;assembly=LiveScore.Core"
    xmlns:matchDetailInfo="clr-namespace:LiveScore.Soccer.Views.Templates.MatchDetailInfo"
    xmlns:prism="clr-namespace:Prism.Mvvm;assembly=Prism.Forms"
    xmlns:resources="clr-namespace:LiveScore.Soccer.ViewResources"
    x:Name="self"
    Title="Match Info"
    BackgroundColor="{StaticResource SecondColor}">
    <NavigationPage.TitleView>
        <coreTemplates:NavigationTitleTemplate Title="Match Info" prism:ViewModelLocator.AutowirePartialView="{x:Reference self}" />
    </NavigationPage.TitleView>
    <ContentPage.ToolbarItems>
        <ToolbarItem Icon="images/common/favorite.png" />
    </ContentPage.ToolbarItems>
    <ContentPage.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <resources:MatchDetailViewResource />
            </ResourceDictionary.MergedDictionaries>
            <coreConverters:FirstCharConverter x:Key="FirstCharConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Content>
        <StackLayout>
            <StackLayout Style="{StaticResource MatchGeneralInfoContainer}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <StackLayout
                        Grid.Row="0"
                        Grid.Column="0"
                        Style="{StaticResource MatchGeneralInfoHomeTeam}">
                        <FlexLayout Style="{StaticResource MatchGeneralWinnerInfoContainer}">
                            <Image Source="images/common/penalty_winner.png" Style="{StaticResource MatchGeneralInfoWinnerInfoIcon}" />
                            <Image Source="images/common/second_leg_winner.png" Style="{StaticResource MatchGeneralInfoWinnerInfoIcon}" />
                        </FlexLayout>

                        <Label Style="{StaticResource MatchGeneralInfoHomeTeamName}" Text="{Binding MatchViewModel.Match.Teams[0].Name}" />
                        <Button Style="{StaticResource MatchGeneralInfoTeamLogo}" Text="{Binding MatchViewModel.Match.Teams[0].Name, Converter={StaticResource FirstCharConverter}}" />
                    </StackLayout>
                    <FlexLayout
                        Grid.Row="0"
                        Grid.Column="1"
                        Style="{StaticResource MatchGeneralInfoScore}">
                        <Button Style="{StaticResource MatchGeneralInfoScoreBox}" Text="{Binding DisplayScore}" />
                    </FlexLayout>
                    <StackLayout
                        Grid.Row="0"
                        Grid.Column="2"
                        Style="{StaticResource MatchGeneralInfoAwayTeam}">
                        <Button Style="{StaticResource MatchGeneralInfoTeamLogo}" Text="{Binding MatchViewModel.Match.Teams[1].Name, Converter={StaticResource FirstCharConverter}}" />
                        <Label Style="{StaticResource MatchGeneralInfoAwayTeamName}" Text="{Binding MatchViewModel.Match.Teams[1].Name}" />

                        <FlexLayout Style="{StaticResource MatchGeneralWinnerInfoContainer}">
                            <Image Source="images/common/penalty_winner.png" Style="{StaticResource MatchGeneralInfoWinnerInfoIcon}" />
                            <Image Source="images/common/second_leg_winner.png" Style="{StaticResource MatchGeneralInfoWinnerInfoIcon}" />
                        </FlexLayout>
                    </StackLayout>
                </Grid>
                <StackLayout>
                    <FlexLayout Style="{StaticResource FlexLayoutAlignCenter}">
                        <Label IsVisible="{Binding MatchViewModel.Match.MatchResult.EventStatus.IsLive}" Style="{StaticResource MatchGeneralInfoStatusLiveIcon}" />
                        <Label Style="{StaticResource MatchGeneralInfoStatus}" Text="{Binding MatchViewModel.DisplayMatchStatus}" />
                    </FlexLayout>
                    <Label Style="{StaticResource MatchGeneralInfoStatus}" Text="{Binding DisplayEventDateAndLeagueName}" />
                </StackLayout>
            </StackLayout>
            <StackLayout Style="{StaticResource MatchGeneralInfoImportant}">
                <Label Style="{StaticResource MatchGeneralInfoImportantContent}" Text="2nd leg, aggregate score: 3 - 3" />
            </StackLayout>
            <BoxView BackgroundColor="{StaticResource PrimaryColor}" Style="{StaticResource HorizontalLine}" />
            <StackLayout Style="{StaticResource MatchGeneralInfoImportant}">
                <Label Style="{StaticResource MatchGeneralInfoImportantContent}" Text="Penalty shoot-out: 3 - 4" />
            </StackLayout>
            <ActivityIndicator
                x:Name="activity"
                IsEnabled="{Binding IsLoading}"
                IsRunning="{Binding IsLoading}"
                IsVisible="{Binding IsLoading}"
                Style="{StaticResource CenterActivityIndicator}" />
            <matchDetailInfo:MatchDetailInfoTemplate IsVisible="{Binding IsNotLoading}" />
        </StackLayout>
    </ContentPage.Content>
</ContentPage>